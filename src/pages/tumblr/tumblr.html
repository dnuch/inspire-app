<ion-header>
    <ion-navbar color="secondary">
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>
            Tumblr
        </ion-title>
    </ion-navbar>
</ion-header>
 
<ion-content padding-top>
    <ion-refresher (ionRefresh)="refreshBlog($event)">
        <ion-refresher-content pullingText="Pull to refresh" refreshingText="Refreshing..."></ion-refresher-content>
    </ion-refresher>
    <ion-list class="selectable" *ngIf="objectService.isObject(items)" text-wrap>
        <ion-item *ngFor="let item of items">
            <ng-template [ngIf]="item.type == 'photo'">
                <img *ngFor="let i of objectService.createRange(item.photos.length)" src="{{item.photos[i].original_size.url}}" imageViewer/>
            </ng-template>
            <p *ngIf="item.type == 'text'" class="app-font-16">
                {{item.body}}
                <ng-template [ngIf]="item.body == ''">
                    {{item.summary}}
                </ng-template>
            </p>
            <p *ngIf="item.type == 'quote'" class="app-font-16">
                {{item.text}}&nbsp;â€”&nbsp;{{item.source}}&nbsp;
            </p>
            <ion-row>
                <ion-col col-11>
                    <ion-icon name="text">&nbsp;{{item.note_count}}</ion-icon>
                </ion-col>
                <ion-col col-1>
                    <ion-icon name="open" (click)="iab.create(item.post_url, '_self', 'zoom=no')"></ion-icon>
                </ion-col>
            </ion-row>
        </ion-item>
    </ion-list>
    <ion-item *ngIf="!objectService.isObject(items)" text-wrap>
        <p class="app-font-16" text-center>
            No items to show :(
            <br><br>
            Data is required to run this app, or Tumblr servers are down
            <br><br>
            Pull to refresh
        </p>
    </ion-item>
    <ion-infinite-scroll (ionInfinite)="morePosts($event)">
        <ion-infinite-scroll-content loadingText="Loading Posts..."></ion-infinite-scroll-content>
    </ion-infinite-scroll>
</ion-content>
